<?xml version="1.0" encoding="UTF-8" standalone="no"?><xmap-revision-content xmlns="urn:xmind:xmap:xmlns:revision:1.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink"><sheet id="5jluen4spfq9ja8ekmc62flltm" modified-by="daxiong" theme="4glkvfsujj7hikcod7b6lvs13j" timestamp="1568127151980" xmlns="urn:xmind:xmap:xmlns:content:2.0"><topic id="67aguvf6bj7dq4dk3o80ahicoe" modified-by="daxiong" structure-class="org.xmind.ui.logic.right" timestamp="1568009262241"><title>网络协议</title><children><topics type="attached"><topic id="1pg6pim2isoerksmt7f8crfk41" modified-by="daxiong" timestamp="1568123187989"><title>TCP</title><children><topics type="attached"><topic id="59ub90f529ah10rfmpi88t91ap" modified-by="daxiong" timestamp="1568124188908"><title>TCP三次握手，四次分手</title><children><topics type="attached"><topic id="6hgecrn1rudqle45pdh2knqoo8" modified-by="daxiong" timestamp="1568123341360"><title>1.标志位</title><children><topics type="attached"><topic id="33up9jcc8c14s3a44d8hulirh9" modified-by="daxiong" timestamp="1568123336492"><title>SYN 同步序号，用于发起请求</title></topic><topic id="56rgt1j16q192kgaeokf2d16ak" modified-by="daxiong" timestamp="1568123352464"><title>FIN 发送方完成数据发送</title></topic></topics></children></topic><topic id="4s0iqijdh69dgcuda7ooe088b3" modified-by="daxiong" timestamp="1568124018331"><title>2.三次握手</title><children><topics type="attached"><topic id="7uv3ia4cpa9mbttm5q72ganjcq" modified-by="daxiong" timestamp="1568123765833"><title/><xhtml:img svg:height="63" svg:width="156" xhtml:src="xap:attachments/6dls9f51lba9h3jjvmvg4r1elj.png"/></topic><topic id="6tq5cv83gulr2r6a135bhesn3c" modified-by="daxiong" timestamp="1568124064822"><title>通过标志、序号进行三次确认，防止伪造请求</title></topic></topics></children></topic><topic id="6i70oa926mpqtv5l1f71m8melg" modified-by="daxiong" timestamp="1568126512763"><title>3.四次分手</title><children><topics type="attached"><topic id="3h6ps0lvr46g9a307698co9s5t" modified-by="daxiong" timestamp="1568124559473"><title>为何需要四次才能分手？？？</title><children><topics type="attached"><topic id="4tpmtocrr3fa7o17l3gicaskdp" modified-by="daxiong" timestamp="1568124249520"><title>全双工</title></topic><topic id="3ktrurhqtc8qp45cu3jr5n4ujl" modified-by="daxiong" timestamp="1568124261760"><title>半关闭</title></topic></topics></children><notes><html><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">为何需要四次才能分手？？？</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">主要由于TCP的半关闭操作的(half-close).</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">TCP连接是全双工(数据在两个方向上能同时传递</xhtml:span><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">)，因此每个方向必须单独进行关闭。这原则就是当一方完成它的数据发送任务后能发送一个FIN来终止这个方向的连接。当一端收到FIN，它必须通知应用另一端已经终止了那个方向的数据传送。</xhtml:span></xhtml:p></html><plain>为何需要四次才能分手？？？&#13;
主要由于TCP的半关闭操作的(half-close).&#13;
TCP连接是全双工(数据在两个方向上能同时传递)，因此每个方向必须单独进行关闭。这原则就是当一方完成它的数据发送任务后能发送一个FIN来终止这个方向的连接。当一端收到FIN，它必须通知应用另一端已经终止了那个方向的数据传送。</plain></notes></topic><topic id="6vnsie0spaatemhhpkpb2ssiau" modified-by="daxiong" timestamp="1568126102715"><title>收到一个FIN表示这一方向上没有数据流动了。</title></topic><topic id="26hb9100t923d1gjhe86e0t3tb" modified-by="daxiong" timestamp="1568127151980"><title>一方主动关闭、一方被动关闭</title><xhtml:img align="right" svg:height="97" svg:width="143" xhtml:src="xap:attachments/79ij6e67foaoh8qb609sorbl8t.png"/><notes><html><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">一方主动关闭、一方被动关闭：</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">1.服务端收到FIN请求：</xhtml:span><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">客户端主动发送FIN给服务器，服务器收到这个FIN。</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm"/></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">2.客户端接受到FIN+ACK确认信息：</xhtml:span><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">服务器端发回一个ACK，确认序号为收到的序号加1.和SYN一样，一个FIN将占用一个序号。同时TCP服务器还向应用程序传送EOF结束符。</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm"/></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">3.客户端收到FIN请求：</xhtml:span><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">接着这个服务器程序就关闭它的连接，导致TCP服务器端发送一个FIN给客户端。</xhtml:span></xhtml:p><xhtml:p><xhtml:span style-id="1ffofd1vvunt5db8naif3516fm">4.客户端发送一个确认，将确认需要设置为收到序号加1.1.</xhtml:span></xhtml:p></html><plain>一方主动关闭、一方被动关闭：&#13;
1.服务端收到FIN请求：客户端主动发送FIN给服务器，服务器收到这个FIN。&#13;
&#13;
2.客户端接受到FIN+ACK确认信息：服务器端发回一个ACK，确认序号为收到的序号加1.和SYN一样，一个FIN将占用一个序号。同时TCP服务器还向应用程序传送EOF结束符。&#13;
&#13;
3.客户端收到FIN请求：接着这个服务器程序就关闭它的连接，导致TCP服务器端发送一个FIN给客户端。&#13;
4.客户端发送一个确认，将确认需要设置为收到序号加1.1.</plain></notes></topic><topic id="3ee3qsabc1u4bkdmblh6v4l0m7" modified-by="daxiong" timestamp="1568126531761"><title/></topic></topics></children></topic></topics></children></topic></topics></children></topic><topic id="2ucsiirspeh5q44rk4jj61aofn" modified-by="daxiong" timestamp="1568009261438"><title>UDP</title></topic><topic id="2pl4idbu6kqo7h0kqgkgihrqr8" modified-by="daxiong" timestamp="1568009271070"><title>HTTP</title><children><topics type="attached"><topic id="4a3cs837uuragceu595fld1112" modified-by="daxiong" timestamp="1568009279809"><title>code</title><children><topics type="attached"><topic id="0dbjprqeomkpvlkkh66e9eshv1" modified-by="daxiong" timestamp="1568009566495"><title>304</title><children><topics type="attached"><topic id="41tcaajvqidlvicsinq8qdugd8" modified-by="daxiong" timestamp="1568009565876"><title>未修改</title></topic><topic id="72p07vqe8h7k047agmji3j5jan" modified-by="daxiong" timestamp="1568009570249"><title>条件请求</title></topic></topics></children></topic></topics></children></topic></topics></children></topic></topics></children></topic><title>网络协议</title></sheet></xmap-revision-content>